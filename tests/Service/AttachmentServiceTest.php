<?php

namespace App\Tests\Service;

use Lle\HermesBundle\Contracts\AttachmentInterface;
use Lle\HermesBundle\Dto\Base64AttachmentDto;
use Lle\HermesBundle\Entity\Mail;
use Lle\HermesBundle\Model\ContactDto;
use Lle\HermesBundle\Model\MailDto;
use Lle\HermesBundle\Service\AttachmentService;
use PHPUnit\Framework\TestCase;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBag;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

class AttachmentServiceTest extends TestCase
{
    protected AttachmentService $attachmentService;

    protected function setUp(): void
    {
        parent::setUp();

        $parameters = new ParameterBag([
            'lle_hermes.root_dir' => __DIR__ . '/../',
            'lle_hermes.attachment_path' => 'data/attachments/',
        ]);

        $this->attachmentService = new AttachmentService($parameters);
    }

    protected function tearDown(): void
    {
        parent::tearDown();

        $filepath = __DIR__ . '/../data/attachments/mail-1/';
        if (file_exists($filepath)) {
            chmod($filepath, 0777);
            $this->attachmentService->delete($filepath);
        }
    }

    public function testSaveAttachments(): void
    {
        $mailDto = $this->createMailDto();
        $mail = $this->createMail(1);

        $this->attachmentService->saveAttachments($mailDto, $mail);

        $expected = [
            [
                'path' => __DIR__ . '/../data/attachments/mail-1/',
                'name' => 'test-attachment.png',
                'content-type' => 'image/png',
            ],
        ];

        self::assertEquals($expected, $mail->getAttachement());
        self::assertTrue(file_exists(__DIR__ . '/../data/attachments/mail-1/'));
    }

    public function testDeleteAttachments(): void
    {
        $mailDto = $this->createMailDto();
        $mail = $this->createMail(2);

        $this->attachmentService->saveAttachments($mailDto, $mail);
        self::assertTrue(file_exists(__DIR__ . '/../data/attachments/mail-2/'));

        $this->attachmentService->deleteAttachements($mail);
        self::assertFalse(file_exists(__DIR__ . '/../data/attachments/mail-2/'));
    }

    protected function createMailDto(): MailDto
    {
        $mailDto = new MailDto();
        $mailDto->setSubject('subject')
            ->setStatus(MailDto::DRAFT)
            ->setAttachments([$this->createBase64AttachmentDto()]);

        return $mailDto;
    }

    protected function createMail(int $id): Mail
    {
        $mail = new Mail();
        $mail->setId($id)
            ->setSubject('subject')
            ->setStatus(Mail::STATUS_DRAFT);

        return $mail;
    }

    protected function createBase64AttachmentDto(): Base64AttachmentDto
    {
        return new Base64AttachmentDto(
            'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAAC0CAYAAABsWTVRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH4QgJAxIvjdeVHwAAJbRJREFUeNrtXXlYU0f3frMHAmEHFbBKFVGRqoii4oKiomLrAlZFcaOoVaQsWq1aUz8RFavV9itiN6u1tVCXVq3WWosWi/r9rAtu7KLsssgaIMmd3x+WQIRAwprAfZ/nPk+WuXNn5rz3nJkzywFo0KBBgwYNGjRo0KBBgwYNGjRo0KBBgwYNGjRo0KBBgwYNGjRodBwYdBMoYsuWLUPy8vIW5+fnDysuLu4ulUq5hBCIxWLduul4PF6lQCAo0dfXzzY0NLxtaGh4Mjw8/BrdgjTRlCI4OHjm06dPg+/duzcsISGB39x8XnvtNYmDg8PjPn36fG5gYHBIJBJRdOvSgL+/v8/IkSPzGAwGAdCql5WVlcTb2/uMSCQyp1u6i+Ldd9/Ve/PNN+NYLFarE+zVy8TERLZw4cKfDxw4wKNbvmuRrJujo2N+WxPs1cve3r583bp1XrQEugACAwMt+/fvX9reJKu5+Hw+WbFixQFaEp0YIpHIcMiQIUUdRbKai8FgkAULFvxGS6STwsPD43ZHk6zutXDhwlO0VDoZgoKCfJhMZruR6KOPPiJHjhwhdnZ2StMwmUyyevXqnbR0OhGcnZ2ftxfJDAwMiFQqJYQQUlZWRubMmaM0rbGxMSUSiYbSEuocA4C57WkSnZycSF1IJBIyadIkpeldXFxyuoIcmJ29gklJSR+05/NGjRol/5yTk4P//e9/sLOzU5o+NjbWIigoaDWtErR7pMk2MTGRtZc209HRIVlZWSQ9PZ14eXmpfN+IESMKaGlpMQICAha2p9lkMplk3rx5REdHR+17N2zY4EabTi1Fdna2d3s+j6IoHD9+HGKxWO1709LS1tFE016i2WtLWR88eDCatkFaCmtr62pokJO2sYvNZpPOvNKj02o0b29vYUZGBkdbyiuVSlFcXDybJpqWwczMbCghRKvKXFxcPJwmmpaBoqiB2lbmFy9e9KeJpmWQSCRCbStzSUlJ984qD3ZnrRiDwWjTl8jCwgKrVq2Ck5MThEIhsrOz8eDBA8TExOD69euoqqpqDtH06SGclmHlypVblI3wFi1aRC5fvkzi4+PJqVOnyIQJE9QaITo6OpLs7GyiDLm5ucTHx0ftkWe/fv3EtOS0DH5+flvRgOf+p59+qkcMmUxG/Pz8VCKDkZERSU9PJ6pAXbKZmZnJaMl1AqJt2bJFKSnEYjHp06dPk2T47rvviKooKioi+vr6KhONxWKRqKgoLj0Y0K4+Wnnd77q6uggJCVGans/nw9/fv9E8ra2t8fbbb6tcBkNDQyxYsEDl9DKZDA8fPrSliaZNoxw2W6G/89Zbb0EofDkQLSgowMmTJ3H+/HlQFKWQpjH4+vqCzVYcPxUWFuLSpUu4cOECnj171uA96qCysrIfbY+0CP7+/kvqmqUdO3YQQgj56aefiFAolP8+e/ZsIpPJ5ObO2tpaqWm7fPmygmncv38/4fF4xNjYmEyfPp3o6uqSJUuWkKKiInkaiqKImZmZyubzvffeW09rNG2qGJOpYDr19fVRXFwMHx8flJSUwNjYGOfPn8fly5cREREhT9enTx9lphiDBw+Wf79x4wbee+89VFVVQSgUwt/fHxkZGXj69Ck8PDxQXV0tv2/8+PEql1ssFr9GE027+mhldb9TFIWkpCRUVFTU+KzQo0cPhISEICwsTG5CLS0tG8xPR0cHRkZG8u979+5FzRTXkydP4O7ujp9//hknT57EP//8gzNnzsjTqkO0ioqKHjTRtJhoBQUF4PNrz2+RSqUICgqCp6cnMjMzERcXBwDQ09NrMD+JRKLwPSYmpl6a999/HwKBAPb29khLS5P/3rdvX3U0mgVNNC2CVCpVINrz589hY2MDLrfWe/Dnn3/C2NgYBgYGSElJAQAIBAKlRKvRelKpFHl5efXS5OXl4a+//oJEIlEgtYGBgcrlLi8vN6aJpsUaLTs7G7q6unB1dVUwpyEhISgrK3tJDCLFuJF9MWzIADgMskPv3r3A49WezVJUVCT/XJewdTFx4kTcuXMHtra2Cs9RFWVlZQagoT149913u9UdzVlYWBCKosiVK1fIq6cIWZibkbybfqTyqhWp/NNI4Sq/2pf8c3wY+XbPDFKZdYoQSTEhhJCRI0cqHTlyuVxSUlIiH3n+/PPPKo8633jjjVJao2kRSktLFQSWm5uLhw8fYuzYsfjrr7/Qq1cvAIDNa2Y4t5uJyxe+x45vCpCcoah9pJX5iD53H39duYifv1yEqrj+kCasxc6t74DDaXhd5ejRo6GvXzs/Xre/1hRevHjBp4mmRTh69GgFg6F4oOXnn38OAHB2doaJiTEmjOqF2AMSZOaUw1tUhomObPSxUmwSHgdYOp0HQz0GsvIpQCaGLPs7jOCF4LevJsPSsntDZEFOTk5Nnwtff/21yuUuKChgdcquTGc2nzo6OqTujiQej4eTJ0/i7u3/IevRMexcmg82CygTEyQ+ozDUVn0ZVxIzfH2pO/YefoCMrHz57wKBAMOGDUNiYiKys7PVyjM0NLTbpk2bcmmiaQlMTU1l+fn5CiqKw+FgX8hr8J3cunt2KQq4cpfghysGOH05DyWlzV/xs27durnh4eHRtOnUEggEAoVlN0aGBji7t2erkwwAmEzAdQgDh94rQXo0D8dEQrw5wQpstvpasrS0dATdR9Mu0ymt+cxmsxEVaoJx9oVt/1weA3PGsRC1pRzXIvRgZixQ6/7CwsJhNNG0CHw+v7rm87zpvTBmQFG7l+GNPkysn6/ebqzMzMwBNNG0S6PJieY6oP361oUlBEWlteSytVavmR8/fmwqEonYNNG0BFwuV94jT8uWtssz76fKMMC7GEtDaxePZBeoF9eioKCAUVZWNo8mmvaYTjnRdh6txNYvxaiStM2zyisJDp6uwuTAUlRJgHmTaqeo4u6rvxUgNTV1DU007dFocrUilRHsOlYJ1zUlKCxpvR3stxJkWLO3Ar3nFOOjr8VYMo2H+CNCzJtYS7SY25IGRqmNN/21a9ecwsLCjGiiaQF4PF75q7/9kyjDAlEZpC3Yb5SaRSHsaCWGLCmB65oS5BZSiHxfF09OGGLHCh1Ymdc267M8Cuk59U3nggUL8Mknn9RbGl6D3Nxc5uPHjw/RRNMCcDickoZ+j7ktxZq9FVD1aA5CgLvJMoR/X4kx75ZigHcxjl6ogvcULlKiDRG9XQ+zxnLBe3Xqk6WDvzNcG8yztLQUAQEBOHfuHHr0aHit48WLF2ft27fPsDPIgt2ZicblckuU/Xf41yo8fCLDqpk8DO3HgpkhEwwGIK4ieFFG8CyXQnyqDPEpMly9I0V2AQU2C/AYxcHWcD1MGMrBq9Yvu4DCkQvV6Nmdj4WL/cGyXoP0mIMATjdEIhQXF2Py5MlISEhAZGQk9u3bh8zMzNr8srNZd+/ePQRgLmhoLpYvX34QrXB2maEegwTN45OkHw3qLSOq/NOIPD1pQPw9eUSH9zJK3us2veRLhHbv3q0039DQUIXNLnl5ecTCwkIhTY8ePaQ7d+40oDWaJvcLmMzKxv5/awwHPUyZEFcBpRUEpRUEUhmgpwMY6TNhZcbAmMEcjLRn1zeLAPKKKOyPqsLB01Uor3xph+3s7BAdXTtNOXSo8jACO3bswPjx4+UneZuZmcHAwAC5ubU+v6ysLNaDBw++AzCDVh0airfffvtCXe3g6elJ6kZQGT+ETfLOGTaopRq77hwWkqXTeYTPZdSJXjeQfPXVV6S6ulpBS1VXVxMrKyulWk1XV5ccO3aMEEJIfHy80sAX//nPf3rTEtVAeHl5sfr27SvGKxFN9u/fryDEAb1Y5J9vhE2Sq/wPIxK9XY9MGcEhDEbt/ba2fcm5c+cIRVFKj0Y4ePBgk+bZw8ODDB48WOn/c+bMuUlLVQOxZMmSL+sKavbs2XLBz5w5UzG8IZdBwlbqkIo/6hMs7pCQvO/NJ5ZmzHohEbdv304qKyubPINDJpORcePGtTiGgUgkcqYlq0FYv379cAMDA6quoE6cOCEXfH5+PrG0tKwnTD0dBhncl0UmOHKIYz8WsTBmKg3D8+DBA6IOUlJSiJ6eXovI5u7unkJLV0MgEomYw4cPV4gwbGRkVE/zXLp0iagb8Y7D4ZDQ0FAikUhIc/Df//63xQEz1q1b50tLWQPg4+Pz46sCCgwMbFDwGzduVOfsMnLlyhXSEshkMjJ27NgWkc3BwaE8MjKSQ0u6A7F27dqJurq6CoLh8XgkIyNDqeDnz5/fpHCHDBlCnjx5QloDiYmJhMPhtIhsvr6+39HS7iD4+/vzBg0aVPKqUN55551GBV9VVUWmTp2qVKjz588n5eXlpDWxfPnyFhHN1NSUEolEtrTUOwBz5869gAZOUExOTm5S8FKplHzyySfE1dWVODo6EmdnZ7JgwQJy9uxZ0hZISUkhbDa7RWSbOHHiU1rq7YzVq1fP4nK59YSxYMECoql41cXSnOvdd9/9hJZ+O8HPz0/X1ta2oqERWnx8vMYS7dSpUy0mmomJCbVly5ZBNAvaAbNnz45tSAheXl5Ek1FVVUVMTU1bTLZRo0bl06PQth8AvPPqgS011x9//EE0HUuXLm2VyHjz58+/SLOhjRAcHPyapaWlpKGG7969u8K5tJqK6OjoVgvBGBwcHECzog3g4uKSoazhp0yZQrQBL168aLFPrebq1q2bdOPGjXaaKi+tXMrt7e19LDY21lLZ/zVHUmk6DAwM5GvRXgWXy0VkZCTs7VULopyTk8O6cuVKbFRUFItWQ63kyuDz+Y2+3QEBAURbsG/fPqX1cHNzI8XFxWT69OkqazZvb+/zNEtaiI0bN5rZ2NhUNtXYwcHBWkO0tLS0RusSGRlJJBIJmTRpksoT/8HBwStptrQAbm5uiao09vr164k2YcSIEUrrIhQKyZMnT0hRURGxs7NTiWy9evWqDg0NtaAZ0wwsX778Y1XNx4YNG7SKaGfOnGm0PpMmTSIURZGHDx+SproNNdeMGTPiadaoiU2bNlmam5tLVSVaWFgY0TYMHz680TodPnyYEEJIeHi4Sm3AYDBIQEDAOpo9amDGjBl3UGczx+rVqwmDwVDayH/++afWEe3ChQuNEsfCwoIUFRURqVRKRo0apRLZbGxsqg8cOCCkGaQCQkJCRtT1Na1Zs4YQQoiNjY1SM6OtaGpRZE3d7969S5TNiKD+wgJ61kBdbQaA3Lhxg+Tn5zfYVzE0NFS6yFEbEBsb22Tg2Dt37hBCCPH19VWJaHp6emTLli0jaCY17s6wrbti9s033yQURSldFbt//36i7WjKZ+bu7k4IISQ7O1vlzS5Tp05NoNnU+AzA6ZrG6tmzJykoKCDr1q1rsDHt7e2bvWlEk3Dnzp0mN83ULBjYunWryr61zZs3T6YZpQR1NwB7eHiQZcuWKW3MS5cukc6CefPmNUocJycnQgghBQUFKmu1yZMnp9GMagCBgYFLofqaLNKZ8Pjx4ya12sWLFwkhhAQFBam8wmPbtm0jaWa9gqlTpz5QlWinT58mnQ1N9dXc3NwIIYRkZGSQhpaxo+FjFeJoZim6NMz19fUpVRrPzs5OK9aetbZfDQC5d+8eIYQQT09PlZd+7927t0PigWrkMqH8/PxdpaWlKoUPCg4ObvI8WC2d14WFRePTlceOHQMAzJun2gHeBQUFjOTk5K20KvsX9vb2paq8oUKhkJSVlZHOilWrVjVa/969exNCCBGLxUQoFKqk1caOHZtDMwxAQEDAHKi+Y5t0ZkRFRTXZBomJiWpt3+NyuWT37t1921uuGmdzkpKSPlQ17bJlyzr1SzdiRNMO/cuXLwMABg8erFKe1dXVSElJWdeliRYYGGh87do1lfYp2tnZYeTIzj1a79mzJ/T09BpNc/Pmy/P5hgwZonK+KSkpk7s00QoLC8OKi4tVGgTMmjWrS3Qlmtr/cPv2bQBAnz59VM7z9u3bPaOiorhdkmheXl6sa9eu+dT9zcBA+WHU7u7uXYJoymIQ1ODRo0cghCjEcFdl9Hnr1q15XZJoBgYG25OTk+WB6zkcDr755psG0wqFwk5vNmsgEDQe67OyshK5ublNmthXkZub+1ZXJBrj2rVra+v+MG3aNJSUNByPYsyYMeBwusYpALq6uk2mycjIAJ/PVyvfZ8+eDetyRHvnnXc2PXr0SKFFFy1aJO9/NOBn6zLunqY0GvAy3E9paala+SYkJFh2OaJdv359/au/jRs3Dnfv3m0w/YABA7oM0VTRaFVVVSgqUi+6ckZGBmvHjh22XYZoK1euDI6Pj1foyRobG8PU1BQZGRkN3tO7d2+aaHWgo6OjNtEA4Pnz5zO6DNFu3LixqYGBAQAo7aNZWlp2GaLp6Og0mcbY2BhZWVlq511YWOjSJYi2atWqlbdv364X/LRmBKWs39HUkL8zQVk8T/koisGAjY2N3HGr5sjTvksQ7datW9uVNR7w8qCThjrH6o6wOjPRbG1tIRAIcP36dbXzzsjI6NHpiRYUFOR18+ZNk4b+k8lkCia0IbNKE+0l3NzcIJVK8X//939q552enq5DCGF0aqIlJSVtVvZfamoqZDIZ+vXrRxOtCaItXrwY9+/fR3l5udp5l5aWMvbt2/d6pybavXv3+iv7TywW4/Hjx3B1rR8mmsVi0UT7FzNmzICTk1OzzGYN8vLyHDst0davX2+Vnp7eqGv/4sWLWL58eb05vJr+W1fBuHHjGiRb37598cUXX7wUIpPZpOZThvLycvtOS7Sqqqr+TaU5evQozM3NIRKJFAvcCZdtN4b+/fsjIiIC7u7ucHNzg6enJ8LCwnDr1i35Um8/Pz/cv38fM2fOVDt/mUwmaI96dEioayaT2aRaun37Nv744w8EBQUhPj4ehw8fVjoS7ezw9fWFr68vCCG4e/cu7t+/jx9++AESiQQcDgempqZwcnLCqVOncPr0afj4+Kg8JcVgMKSdtuGCgoJGQYVlx46OjkQikRCpVEoCAgIIADJt2jTS1UBRFImIiFB6sA3+PaZq/Pjx5PTp0+TGjRtEX19fpaXda9eu3dZpiRYYGDgQKu4L2Lx5s7zBL126RNLT07sc0fz8/NQNSkYMDQ1VSisSicZ2ZmvA5PF4CqGme3dnEj2dhndnf/rpp6SrIiYmplWOh0fDMUhl7eVHY3cQ0ajRo0cnckleH88RacwZLhwYCBiolgLn/q7GB4ekSMuskideu3Yt9PX1sXjx4i7XP/vxxx/bLO/hw4cn/nugYaclGn77tHeSLO+uLVDbueeygVljuZgygoNloQSn/6oGABBCsHz5chBCsGTJkk5NLIlEgri4OCQkJCA7Oxtnz55tM/+cvb190Llz5zpxYyYE7Kn804g0dlX8YUR8Z/DqdXj37NnTac1kXFwc6dWrV5uZSigGZWvXkyDb3c1OEvaYSvN/OAGZmNH4sBtwH8FBSiaF+2kyBUdudXU1JkyY0Kmct0+ePMGYMWOQk5MDHocBT1cuXBzYSM0CKqtb17q5urpmh4SEDPv222+p9qpfu0tqW8Dwm2ac+05Lp/NU035SYFpIKf66q+ju8fPzw+eff95ppqT8/f3x2WefwUjIwe/7dGBv87Je569LMGtjWas9Z/BAK/yxn0f0+AQMgzE3OCa9JzJ6iCrafPTXno3p5eXF+uane8P+77FM5Xs4bOC7DwXoZqJY1EOHDmH27NnNmkzWRFy6dAkAsHkxR04y4KVWt3utdV6mIX3Z+HVHGQSsQgaRFDGo/F+cJYUpl9vFzdCejWnTXbo9LbOSYW2h3mMtjJk49qEA7Ffa+5dffsG4ceOQnZ2t9UTLz88Hm8XAwincel0Ivzd5Lc7fyY6N83v1YCxUNGJU4eXh5FnbH2XVrkS7c+feKgBw7Kf+GzragY3tfvWXNd+6dQvOzs6Ij9fuQCEymRS2PVkwENTvzfi9xcPgvs3XaqMd2Di7Rw+GevXzTn1WxkhJeezbaYgWFBQ08fLfaQZcNjB8QPO8KgFefMwaW3+u8+nTp3BxccHFi9p7pD4lk0BPyfYANguIXC8AR81mYzCAwLf5uPCxfoMEpijgrffL8HXUnZmdgmgikYgdFxf7g0RKwdWR02ClVW24yPd18bpl/WKXlJRg+vTp+Oyzz7RWo+k0YiHf6MNCRIgAqg60jYUMnAjVQ9hKHaUETXgmQ1KGDM/zyy21nmgffPCBxdWrVxPi4m6aAYDn+JatvhDqMvDVRgFYDZRcKpXC398fy5YtQ2VlpXZpNIqCLq9xFi2cwsV3HwoafVFZTGDpdB5ufyPEtJGN7+Z/lvvSu5FXWG7Y1vVr8czAli1bBonF4oEURbEZDIaeVCo1FIvF5hRFGebm5jpGRkbaFxQUMAFgmB0b8ye1fJmP80A2gubxEf59w2T65ptv8ODBA5w8eVJrtuZRFAU2q+n3fs54LkYNYuOTH6tw6mo1nuZSYDGBfj1ZmD6KA98ZPLzWTTX9Uf2vxyj3eYlOW9ev2X60tWvX+p0/f/5AUlKSSkOiUYPYOP6RAOZGraNEqySAy8oSxKcqd5V069YN0dHRcHFx0XiicTksjB7ExIW9+mrdV1lNwGYx6o3IVcHVO1JMDiyFni4LIeu3CESitvOnNUujBQcHT4qIiDhobsRk/DdYH1ZmBIUlBPnFBDkFFLILKbBZAJ/LQK9uTIx5gw2n/q07rcrjAF99IIDLyhL5m/kqcnJyMHHiRERGRmr8HKlURqFMrP5LyOc23+fe3fTlvWUVMmRnZv4HQLBGaTR3d/eECxcu2N45LGw1Z2JzsftYJT78Utxkuo0bNyI0NFQjp62kUik4HA5srVm4d6T9oh5SFGDu8QJlYoLXe1tJ5ngtMNm9e3dpWzyrWXYsISGht76eToeTDACC5/MxYmDT2jIsLAxz586FWCzWSKIBQF4RBULa77lMJjDV+eWAISUtg/Pw4cNYjRp1lpWVscorKlFQTDpcSCwm8NUGQZMjNgD46aefsGjRIhBCNJJoL8oInuZS7fps7zozEWfPnnVYsmTJMY0hGpfLpSiK4JfYao0QVB8rJkJXqDZwOnHihHyji6YRDQDuJsva9dluwziw6VFLgyNHjixYsmRJlEYQzdDQsAoAvjxTpTHCWvEWDy4Oqg04QkNDNZZo95Lbd1MSmwUcCNRFzb40iqJw+PBhr+nTpz8UiUTCDiVar169UgHgVoIM/3ukGbu1mEzg4DoBdFQwoSkpKcjMzNRIot1PlbX7892GcbAvQFfBCX7u3Ln+x48fz928ebNnhxGte/fu12o+R5zWHK3Wx4qJD5fyVSQmUyOJ9vAJ1SFlWPEWD1c/F2LpdJ58hcfjx4/5e/bsiV68ePHPUVFRrHYnmpmZ2fGaz6euSFAm1pzO9VovPobZNW5ChwwZgu7du3doOa9du4bHjx/XI1pqlkypX7Ct4diPhYgQXTw9aYhf9+hh5UwejPQpfPvtt2/u3bs3d9u2bYOam3eznUqW3YxlmTmFTAA4skWAuRM0Zwf5gzQZRq4oRbWENDSQQUxMTIcdH08IwerVqxEREQErKyukp6cjOTlZ4eSkpycNWm0GpaWQSIHjMXx8+JUEXJ5AunTp0ikikUjtxZLNrk1/2x4vaj7feKBZu+oH9mZhvXd9EyoUCvHLL790aIyC0NBQREREAHh5bHtOTk694wuqJJrTlhw2sMitErH/5UImrWQfO3bs1/DwcEG7EU2oz5cvZE94SkHTsN6bj4G9a7sVU6dORXx8PKZMmdJhZTp16hQ+/FAxplpZWRmKi4sViVatcc0JS2Mx1sxiISkpiffkyZNN7UY0Doctbw6JjGhcw3DZQPjql761VatW4tdff0XPnj07rDx37tyBj49PPWexqalpPaKxNXS/DSV5UfNyvN5uRMsrqJAfctzchYxtjQmOHEwbycGx775FSkpKh5UjPj4ekydPRlmZ4m4mS0tLGBsb1yMaTwMPTKqSAEf/EILBYMDExOS3diPas8x8uTNviC0bmoqdq3RQUVGJRQsXyM/GlUql+OKLL3D//v02f/6JEycwZswYPH/+vN5/NcuXXiVaS1ZktM0ABgj8qh8eJefAw8Pj7t69e79uF6Jt2LDBKSUtW758c/oozY3LZGvNwswxHMRdv4mPP/5YTrStW7fC0dERO3fulBOwNZGUlITZs2fD09OzHpFqMH78+HpEE/AZDW4i6SiUVXHg+1k/HI6+CS8vrxhHR8ehzcmnWUTLyckJqOlrzBzDgcPrmr2J19/z5drMrVu34uHDh+Dz+Th58iSYTCY2btwINze3VpkpqKqqwtmzZzFt2jTY2dnh1KlTjZv2CRMAQGG74GvdmNCElUxSGfBDjC6G+bFwOS5dFhgYuDE6OtpVJBI1a+THbubb6lbz9u1ZowtNx/ABbPS0YOFpbiUWL16MuLg4ODs749ChQ/Dx8UFMTAwGDBiARYsWwcfHBwMHDmwy2FdRURFSU1ORmpqKxMREXL16FbGxsaioUG2RqpWVFWxtX4ZiSkhIUCBaR+JpLoUfLlXj8G8cpD3LxKRJk1JHjx49RSQSJbckX7XfnY0bN5p98skneWKxGNv9dBAyXzuCS6zZWyFfBBAeHo6QkBAAgKurK2JiYuqlt7CwkJONw+GAxWLJo8i9ePGixeWZO3eu/EgqKysruUZdNYuHfWvb9+UtKiU4eaUa3/9ejb/jpSAE6Nmzp3TWrFlb9+/fv6M1nqG2RisqKlotFovRr5ce1nppT8zMuscMhIWFwdfXF4aGhli8eHGDRMvNzW3T8gwdOlTuR6sbx6lX9/bRaNVS4HycBMcuVuG3GxK5k1ggEGDKlCnXhw0b9uYHH3zwvLWepzbRSktLBwLArDEUuGyt4ZnC2R2FhYX48ssvERISAgcHhw4pT81zk5KSFHxr1uZtS7QHaTJ8e74a3/9ehfwXtc/V09MjkydPvjFgwIBl27dvf3Ty5MlWfa7aVGEwGBQAHPtdijdd2Bhqqx2n+by6k+3HH39ESEhIh8WVqtkGWLd/BgC6/LYZCWQXUAj5TIwTMYrTDoaGhmTy5Ml/DRo0yHfLli1JrU2wZhPNwsLiBzabPfdZTjVGrajGa5ZCuDlSmDQMcB3K1ljnbVa+4mApMTERgPJQjW2NGoK/SjQ2q3XbT0YBEaeqsO1rMUoqajWYibExmeLu/rutre1ykUiUERUV1ab1VZtoH3/88Wk/P7+Po6Ojg4qKihjpmSX4KhP46heAzWJi+EAduDlSmODIhmM/ttrnRbQVUrIUC1JeXg6ZTIbY2NgOKU9iYiJsbW3lhK9BSbUxgNYhf04BhYXbyhF7r3bRA5PJxNSpUx85OTl5iESi1HazKM256datWxc3bdp03MLCYhCDwTAtKCjgEkJAEYJnuRJcuSPF4V+rsT9agj9vy/Ak56VD1NyIAQ67YzRe6DEOMnJrXQ+vv/46PD094ePjo7JLojVx69YtWFlZ4YsvvlBw2Pa3tcJY+5bveLtyW4ppIWV4lF7rjO7fv7940aJFK48cOeIbExNT1J71bRWpb9iwoU9+fv7qp0+fTk1OTu6VlpbGa2inEZfDhFN/HlwGEYx2YGOkPRv6um1PvPQcCnYLShQ63aNHj4ZMJmtRwK62gHV3A8QfZjR7GooQYPf3ldj2tRiyOr0FDw+P+y4uLi4bNmwo7oh6tYmU/f39rcrLy+eWlJS4Z2VlOSQmJprn5+fXexabzcTgfgYYPbAaY99gwOWNtunjbf6agz1H81o1T6FQqHCsqUwma7X+3oaFfIiWq38cRmEJwbId5bhwo3ZBm76+PpYsWRL56aefruzIF6hd7BghhBkWFuaenp4+OzMzc1RSUlLv5ORk/qtzjCwWA4NtdTHWQYaxg9lwcWi5xnv4RAZnvwpUS+ovzmQymRg0aFBp7969E62tra/o6+vH83i8TD6f/3TmzJkFtra2MgAUg8EoVrWeABQCipaUlDDCw8MNhEIh29raWk/eZ0xJ6fP333+H/frrr/WW3DAZwLdbBPByVX0Zx82HUnh/VI5nebVqzNzcnFq6dKn3rl27jne0pu6wIeL69eutXrx4sTIrK8vj0aNHdikpKfUOi2GzmBjSXx/jHCQY48DEyEFsCNUgXv4LgsnrmHiYXKjwu4mJCTVx4sTLPXv23Lxnz54bHdUGUVFRrAMHDmTGxsZa1K87sGOFDtbM4aOxfTRVEmDXd2KEf1+Juu+StbW1dOnSpdO2bdv2O2goEG/SggULfhs4cGA5lJyNz2QyiH1fQ/LOTCPy5QYBiT8qbDBGQeEFQ3JovYBYd9NRuJ/D4ZBZs2bdFolEvTSl3ps2bXLW09OjlNXZ3oZFDrynS25+KSTFF1/WL++cIYmN0CfB8/jEyrx+WCNbW9vKbdu2OdGsagLr1q1znzlz5nVzc3MZmopnZCwg45wsyIyxhsTdmUuG2rIIh10/XY8ePWSbNm0K0sT6Ll68+FuoEISCxXwZN6uxNG+88UbFvn37+tMsUgORkZG6q1ev3uni4pLD4XCaHSVk1KhRLw4cODBEg6vKGDduXCpaGA1l+PDhRbt27bKimdMCiEQih0WLFp2xtbWtVLXhGQwGmTdv3t0zZ85o/FomLy8v1tSpU2/+GwRMrYvBYJDZs2fH7d27V4dmSuua1iUeHh7xpqamSk2rubm57L333vtc2+q2YsWKaW5ubgkWFhbSJk0pi0VGjx6d6e/v76Pp9dLqYEqRkZGclJSU5ZmZmXNycnL6ymQyFp/PLzM3N79tY2MTIhKJsrS5frt27XIuLCx0Ky8v715RUWFeUVEh0NXVLZXJZNV8Pv8ug8E4cvDgwTxa9dCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNBoHP8PPzRRGhWCGF8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDgtMDlUMDM6MTg6NDYrMDA6MDBDc7ruAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA4LTA5VDAzOjE4OjQ2KzAwOjAwMi4CUgAAAABJRU5ErkJggg==',
            'test-attachment.png',
            'image/png',
        );
    }
}
